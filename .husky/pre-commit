#!/usr/bin/env sh

# Verifica se √© merge
git merge HEAD &> /dev/null

IS_MERGE_PROCESS=$?

if [ $IS_MERGE_PROCESS -ne 0 ];
  then
    exit $?
  fi

# Recupera arquivos em staging
STAGED_FILES=$(git diff --cached --name-only)

# Aborta a execu√ß√£o caso a √°rea de staging esteja limpa
if [[ "$STAGED_FILES" = "" ]];
  then
    exit 0
  fi

echo "üîç Executando verifica√ß√µes de pre-commit..."

# Formatando c√≥digo com Prettier e ESLint
echo "üíÖ Formatando c√≥digo..."
npm run format
npm run lint

git add $STAGED_FILES

echo "‚úÖ Verifica√ß√µes de pre-commit conclu√≠das!"
